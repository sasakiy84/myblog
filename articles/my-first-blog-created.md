---
title: ブログを作った
description: 個人ブログを作った。 Vue3 + Vite で SSGをしたり GitHub Actions を用いて AWS S3 へのデプロイをしている。仕様、技術情報、追加したい機能などを書いておく。
createdAt: 2022-07-16
updatedAt: 2022-07-16
tags:
  - Frontend
  - Work
---

# ブログ機能の紹介（推しポイント）

個人的に、知識をため込んだテキストなどは DB に保存などではなく、テキストファイルのまま持っておきたい。なにかあっても編集が容易だし、git で管理もできる。Notion などの有名サービスを使うという選択肢もあるが、エディターは [Obsidian](https://obsidian.md/) というローカルでも編集できて、必要な機能が揃っているデスクトップアプリを使っていて、これに満足している。
一方で、 Obsidian を使っていて困るのが、他人と共有するときや、外出先でスマホから見るときだ。Obsidian が提供する Publish 機能や Sync 機能もあるが、お金がかかるため、敬遠していた。
折りしもインターンや就活が始まり、制作物を提出して選考を受けることが増えてきたので、他人と共有するためのブログサイトを作ってみようとしたのが、このサイト。
また、図書館情報学を学ぼうと思っているのだが、図書館情報学の中でも特に情報の方に興味がある。その中でも、情報集約の場については、自分が使いやすいサービスを作ってみながらいろいろと考えていきたい、というモチベーションもあった。その願望を実現した感じでもある。

上のような感じで、ある程度こだわりながら作った＆これから作っていくつもりなので、いくつかの推しポイントがある。

## Markdown テキストをシステムの中心に据えたポータビリティ

前述した通り、テキストデータは Markdown 形式のまま保持しておきたい。一番シンプルで、ポータビリティがいい。
このブログでは、記事を Markdown 形式で書いて、それをファイルサーバーにアップロードして、直接 GET するという形式をとっている。こうすることで、表現力を持ったまま、なにかあったときに容易にほかの形式、サービスに移行できる。

## SSG を使用したサイトパフォーマンス

ネットサーフィンをしているときに、動作の重いページにぶつかると、そのページの印象が下がる。閲覧するだけなんだから、サクサクで動いてほしい。
という願望があるので、SSG(Static Site Generation) を使って、静的ファイルをホスティングする形にした。Page Speed Insight でも 90 点台だし、自分で使ってる感じもサクサクで満足。

# 技術スタックと選定理由

使用したフレームワークなどのうち、目ほしいものを紹介する。

## Vue3 + Vite

Vue3 がでてきて大分たって、そろそろ Nuxt3 が本格的に使えそうになってきてる。個人開発で使われているフロントエンドでのメインフレームワークは、自分の観測範囲だと React / Vue / Svelte と、それらをベースにした Nuxt / Next などが人気に見える。

[https://2021.stateofjs.com/en-US/libraries/front-end-frameworks](https://2021.stateofjs.com/en-US/libraries/front-end-frameworks)

そこまで高度なことをするわけでもなく、小規模な開発であることから、フレームワークに自体による比較というよりは、自分個人の事情から Vue を選んだ。
自分個人の事情とは、

- 期末が近かったり、夏休みに向けてやらなければならないことが多いので、今まで使ったことがない Svelte はパス
- Vue は今まで一番使ってきたが、すべて Options API だった。そろそろ Composition API にデビューしておきたいため、 React より Vue への興味が勝った

使ってみた感想は以下のような感じ

- やっと Vue + TS に人権が出てきた
- React にもあるけど、 Suspense 面白い。
- ライブラリ群も普通に充実してる

また、爆速という噂の Vite も試してみた。開発時にバンドルをしないことで開発者体験をアゲアゲにできる、という理解をしている。
そこまで大きなコードではないため、あまり有用性を実感できていない。しかし、SCSS の導入がとても便利だったことや、SSG の導入も比較的楽だったこと、以前ほかのコードで Jest と Vitest で同じテストを実行したときに Vitest がとても速かったことなどから、可能性はとても感じている。

## markdown / unified

Markdown を HTML に表示するときに使う。AST(Abstract Syntax Tree) を操作するエコシステムとして、unified というものが存在するらしい。
JS 界隈で Markdown を扱うときは、 markdown-it がデファクトスタンダードっぽい。そこで、まずは markdown-it を使うことを考えたが、「markdown-it は HTML 出力に重きをおいているのに対して、unified は AST centered であるため、自由度が高い」という噂を聞いて unified にした。
実際、source -> AST, AST -> AST, AST -> output が分かれていて、それぞれにいろいろなライブラリがあるので、拡張性が高そう。
また、AST については言語関係のシステムを作るに当たって、ありえん有用そうな概念なので、できるだけパッケージ化されたものじゃなくて低レベルなものを触っておきたかった、という理由もある。

## vite-ssg

vite で SSG をするなら、これ一択っぽい？
使ってみた感じ、機能は揃っており、やりたいことはできた＆できそうな感じがした。
導入自体はとても簡単。また、設定もツボをついていた。例えば、S3 などでホスティングするときに、 `path.html` ではなく `/path/index.html` を生成しなければならないが、設定一つでそれができた。
ほかにも、メタタグを設定するライブラリが内蔵されていたりと、不満はなかった。

## GitHub Actions + AWS S3

GitHub Actions は、特定のタイミングで実行されるタスクを定義できるサービス。例えば、 staging branch に push されたときにテストを走らせるとか。
また、AWS S3(Amazon Simple Storage Service) はファイルストレージサービスで、公開設定を行えば、静的ファイルのホスティングサービスとしても使える。今回は、SSG をしているので、ホスティング先は S3 で十分。お金も全然かからない。
S3 へは、AWS CLI とよばれるコマンドラインツールでファイルをアップロードできる。そのため、GitHub Actions でタスクを定義して、master branch に push されると、自動でサイトが更新されるようにした。
また、Cloud Formation という AWS のサービスを使って、S3 の設定をコードに落とし込んだ。正直、今回だけを考えると手動で設定したほうが楽だが、Cloud Formation の勉強と 今後の拡張性を考えてやった。

## 独自ドメイン + Cloud Flare

ドメインを Cloud Flare でとった。DNS もそのまま Cloud Flare を利用。`CNAME` レコードを設定して、S3 に通信を飛ばすようにした。
まだ、Cloud Flare のほかの機能は使っていないが、いろいろできるっぽいので楽しみ。

# 作成時のログ
